/*
 * Inline Form Validation Engine 2.6.1, jQuery plugin
 *
 * Copyright(c) 2010, Cedric Dugas
 * http://www.position-absolute.com
 *
 * 2.0 Rewrite by Olivier Refalo
 * http://www.crionics.com
 *
 * Form validation engine allowing custom regex rules to be added.
 * Licensed under the MIT License
 */
(function(g){var f={init:function(a){if(!this.data("jqv")||null==this.data("jqv"))a=f._saveOptions(this,a),g(".formError").live("click",function(){g(this).fadeOut(150,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()})});return this},attach:function(a){if(!g(this).is("form"))return alert("Sorry, jqv.attach() only applies to a form"),this;a=a?f._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":
"class";a.binded&&(this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").not("[type=radio]").not(".datepicker").bind(a.validationEventTrigger,f._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]").bind("click",f._onFieldEvent),this.find("["+a.validateAttribute+"*=validate][class*=datepicker]").bind(a.validationEventTrigger,{delay:300},f._onFieldEvent));a.autoPositionUpdate&&g(window).bind("resize",{noAnimation:!0,
formElem:this},f.updatePromptsPosition);this.bind("submit",f._onSubmitEvent);return this},detach:function(){if(!g(this).is("form"))return alert("Sorry, jqv.detach() only applies to a form"),this;var a=this.data("jqv");this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").unbind(a.validationEventTrigger,f._onFieldEvent);this.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").unbind("click",f._onFieldEvent);this.unbind("submit",f.onAjaxFormComplete);
this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").die(a.validationEventTrigger,f._onFieldEvent);this.find("["+a.validateAttribute+"*=validate][type=checkbox]").die("click",f._onFieldEvent);this.die("submit",f.onAjaxFormComplete);this.removeData("jqv");a.autoPositionUpdate&&g(window).unbind("resize",f.updatePromptsPosition);return this},validate:function(){var a=g(this),b=null;if(a.is("form")&&!a.hasClass("validating")){a.addClass("validating");var c=a.data("jqv"),b=f._validateFields(this);
setTimeout(function(){a.removeClass("validating")},100);if(b&&c.onFormSuccess)c.onFormSuccess();else if(!b&&c.onFormFailure)c.onFormFailure()}else if(a.is("form"))a.removeClass("validating");else if(c=a.closest("form").data("jqv"),(b=f._validateField(a,c))&&c.onFieldSuccess)c.onFieldSuccess();else if(c.onFieldFailure&&0<c.InvalidFields.length)c.onFieldFailure();return b},updatePromptsPosition:function(a){if(a&&this==window)var b=a.data.formElem,c=a.data.noAnimation;else b=g(this.closest("form"));
var e=b.data("jqv");b.find("["+e.validateAttribute+"*=validate]").not(":disabled").each(function(){var a=g(this);e.prettySelect&&a.is(":hidden")&&(a=b.find("#"+e.usePrefix+a.attr("id")+e.useSuffix));var h=f._getPrompt(a),j=g(h).find(".formErrorContent").html();h&&f._updatePrompt(a,g(h),j,void 0,!1,e,c)});return this},showPrompt:function(a,b,c,e){var d=this.closest("form").data("jqv");d||(d=f._saveOptions(this,d));c&&(d.promptPosition=c);d.showArrow=!0==e;f._showPrompt(this,a,b,!1,d);return this},
hide:function(){var a=g(this).closest("form").data("jqv"),a=a&&a.fadeDuration?a.fadeDuration:0.3,b;b=g(this).is("form")?"parentForm"+f._getClassName(g(this).attr("id")):f._getClassName(g(this).attr("id"))+"formError";g("."+b).fadeTo(a,0.3,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()});return this},hideAll:function(){var a=this.data("jqv"),a=a?a.fadeDuration:0.3;g(".formError").fadeTo(a,0.3,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()});return this},
_onFieldEvent:function(a){var b=g(this),c=b.closest("form").data("jqv");c.eventTrigger="field";window.setTimeout(function(){f._validateField(b,c);if(0==c.InvalidFields.length&&c.onFieldSuccess)c.onFieldSuccess();else if(0<c.InvalidFields.length&&c.onFieldFailure)c.onFieldFailure()},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=g(this),b=a.data("jqv");b.eventTrigger="submit";var c=f._validateFields(a);return c&&b.ajaxFormValidation?(f._validateFormWithAjax(a,b),!1):b.onValidationComplete?
!!b.onValidationComplete(a,c):c},_checkAjaxStatus:function(a){var b=!0;g.each(a.ajaxValidCache,function(a,e){if(!e)return b=!1});return b},_checkAjaxFieldStatus:function(a,b){return!0==b.ajaxValidCache[a]},_validateFields:function(a){var b=a.data("jqv"),c=!1;a.trigger("jqv.form.validating");var e=null;a.find("["+b.validateAttribute+"*=validate]").not(":disabled").each(function(){var d=g(this),h=[];if(0>g.inArray(d.attr("name"),h)){(c|=f._validateField(d,b))&&null==e&&(e=d.is(":hidden")&&b.prettySelect?
d=a.find("#"+b.usePrefix+f._jqSelector(d.attr("id"))+b.useSuffix):d);if(b.doNotShowAllErrosOnSubmit)return!1;h.push(d.attr("name"));if(!0==b.showOneMessage&&c)return!1}});a.trigger("jqv.form.result",[c]);if(c){if(b.scroll){var d=e.offset().top,h=e.offset().left,j=b.promptPosition;"string"==typeof j&&-1!=j.indexOf(":")&&(j=j.substring(0,j.indexOf(":")));if("bottomRight"!=j&&"bottomLeft"!=j&&(j=f._getPrompt(e)))d=j.offset().top;if(b.isOverflown){j=g(b.overflownDIV);if(!j.length)return!1;h=j.scrollTop();
j=-parseInt(j.offset().top);d+=h+j-5;g(b.overflownDIV+":not(:animated)").animate({scrollTop:d},1100,function(){b.focusFirstField&&e.focus()})}else g("html, body").animate({scrollTop:d},1100,function(){b.focusFirstField&&e.focus()}),g("html, body").animate({scrollLeft:h},1100)}else b.focusFirstField&&e.focus();return!1}return!0},_validateFormWithAjax:function(a,b){var c=a.serialize(),e=b.ajaxFormValidationMethod?b.ajaxFormValidationMethod:"GET",d=b.ajaxFormValidationURL?b.ajaxFormValidationURL:a.attr("action"),
h=b.dataType?b.dataType:"json";g.ajax({type:e,url:d,cache:!1,dataType:h,data:c,form:a,methods:f,options:b,beforeSend:function(){return b.onBeforeAjaxFormValidation(a,b)},error:function(a,b){f._ajaxError(a,b)},success:function(c){if("json"==h&&!0!==c){for(var d=!1,e=0;e<c.length;e++){var k=c[e],i=g(g("#"+k[0])[0]);if(1==i.length){var n=k[2];!0==k[1]?""==n||!n?f._closePrompt(i):(b.allrules[n]&&(k=b.allrules[n].alertTextOk)&&(n=k),f._showPrompt(i,n,"pass",!1,b,!0)):(d|=1,b.allrules[n]&&(k=b.allrules[n].alertText)&&
(n=k),f._showPrompt(i,n,"",!1,b,!0))}}b.onAjaxFormComplete(!d,a,c,b)}else b.onAjaxFormComplete(!0,a,c,b)}})},_validateField:function(a,b,c){a.attr("id")||(a.attr("id","form-validation-field-"+g.validationEngine.fieldIdCounter),++g.validationEngine.fieldIdCounter);if(a.is(":hidden")&&!b.prettySelect||a.parent().is(":hidden"))return!1;var e=a.attr(b.validateAttribute),e=/validate\[(.*)\]/.exec(e);if(!e)return!1;var d=e[1].split(/\[|,|\]/),e=a.attr("name"),h="",j="",m=!1,p=!1;b.isError=!1;b.showArrow=
!0;0<b.maxErrorsPerField&&(p=!0);for(var k=g(a.closest("form")),i=0;i<d.length;i++)d[i]=d[i].replace(" ",""),""===d[i]&&delete d[i];for(var n=i=0;i<d.length;i++){if(p&&n>=b.maxErrorsPerField){m||(c=g.inArray("required",d),m=-1!=c&&c>=i);break}var l=void 0;switch(d[i]){case "required":m=!0;l=f._getErrorMessage(k,a,d[i],d,i,b,f._required);break;case "custom":l=f._getErrorMessage(k,a,d[i],d,i,b,f._custom);break;case "groupRequired":var q="["+b.validateAttribute+"*="+d[i+1]+"]",l=k.find(q).eq(0);if(l[0]!=
a[0]){f._validateField(l,b,c);b.showArrow=!0;continue}(l=f._getErrorMessage(k,a,d[i],d,i,b,f._groupRequired))&&(m=!0);b.showArrow=!1;break;case "ajax":(l=f._ajax(a,d,i,b))&&(j="load");break;case "minSize":l=f._getErrorMessage(k,a,d[i],d,i,b,f._minSize);break;case "maxSize":l=f._getErrorMessage(k,a,d[i],d,i,b,f._maxSize);break;case "min":l=f._getErrorMessage(k,a,d[i],d,i,b,f._min);break;case "max":l=f._getErrorMessage(k,a,d[i],d,i,b,f._max);break;case "past":l=f._getErrorMessage(k,a,d[i],d,i,b,f._past);
break;case "future":l=f._getErrorMessage(k,a,d[i],d,i,b,f._future);break;case "dateRange":q="["+b.validateAttribute+"*="+d[i+1]+"]";b.firstOfGroup=k.find(q).eq(0);b.secondOfGroup=k.find(q).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)l=f._getErrorMessage(k,a,d[i],d,i,b,f._dateRange);l&&(m=!0);b.showArrow=!1;break;case "dateTimeRange":q="["+b.validateAttribute+"*="+d[i+1]+"]";b.firstOfGroup=k.find(q).eq(0);b.secondOfGroup=k.find(q).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)l=
f._getErrorMessage(k,a,d[i],d,i,b,f._dateTimeRange);l&&(m=!0);b.showArrow=!1;break;case "maxCheckbox":a=g(k.find("input[name='"+e+"']"));l=f._getErrorMessage(k,a,d[i],d,i,b,f._maxCheckbox);break;case "minCheckbox":a=g(k.find("input[name='"+e+"']"));l=f._getErrorMessage(k,a,d[i],d,i,b,f._minCheckbox);break;case "equals":l=f._getErrorMessage(k,a,d[i],d,i,b,f._equals);break;case "funcCall":l=f._getErrorMessage(k,a,d[i],d,i,b,f._funcCall);break;case "creditCard":l=f._getErrorMessage(k,a,d[i],d,i,b,f._creditCard);
break;case "condRequired":l=f._getErrorMessage(k,a,d[i],d,i,b,f._condRequired),void 0!==l&&(m=!0)}q=!1;if("object"==typeof l)switch(l.status){case "_break":q=!0;break;case "_error":l=l.message;break;case "_error_no_prompt":return!0}if(q)break;"string"==typeof l&&(h+=l+"<br/>",b.isError=!0,n++)}!m&&1>a.val().length&&(b.isError=!1);c=a.prop("type");if(("radio"==c||"checkbox"==c)&&1<k.find("input[name='"+e+"']").size())a=g(k.find("input[name='"+e+"'][type!=hidden]:first")),b.showArrow=!1;a.is(":hidden")&&
b.prettySelect&&(a=k.find("#"+b.usePrefix+f._jqSelector(a.attr("id"))+b.useSuffix));b.isError?f._showPrompt(a,h,j,!1,b):f._closePrompt(a);a.trigger("jqv.field.result",[a,b.isError,h]);c=g.inArray(a[0],b.InvalidFields);-1==c?b.isError&&b.InvalidFields.push(a[0]):b.isError||b.InvalidFields.splice(c,1);f._handleStatusCssClasses(a,b);return b.isError},_handleStatusCssClasses:function(a,b){b.addSuccessCssClassToField&&a.removeClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&a.removeClass(b.addFailureCssClassToField);
b.addSuccessCssClassToField&&!b.isError&&a.addClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&b.isError&&a.addClass(b.addFailureCssClassToField)},_getErrorMessage:function(a,b,c,e,d,h,j){var m=c;if("custom"==c)var p=jQuery.inArray(c,e)+1,c="custom["+e[p]+"]";p=(b.attr("data-validation-engine")?b.attr("data-validation-engine"):b.attr("class")).split(" ");a="future"==c||"past"==c||"maxCheckbox"==c||"minCheckbox"==c?j(a,b,e,d,h):j(b,e,d,h);void 0!=a&&(b=f._getCustomErrorMessage(g(b),
p,m,h))&&(a=b);return a},_getCustomErrorMessage:function(a,b,c,e){var d=!1,d=f._validityProp[c];if(void 0!=d&&(d=a.attr("data-errormessage-"+d),void 0!=d))return d;d=a.attr("data-errormessage");if(void 0!=d)return d;a="#"+a.attr("id");if("undefined"!=typeof e.custom_error_messages[a]&&"undefined"!=typeof e.custom_error_messages[a][c])d=e.custom_error_messages[a][c].message;else if(0<b.length)for(a=0;a<b.length&&0<b.length;a++){var h="."+b[a];if("undefined"!=typeof e.custom_error_messages[h]&&"undefined"!=
typeof e.custom_error_messages[h][c]){d=e.custom_error_messages[h][c].message;break}}!d&&("undefined"!=typeof e.custom_error_messages[c]&&"undefined"!=typeof e.custom_error_messages[c].message)&&(d=e.custom_error_messages[c].message);return d},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",
dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(a,b,c,e,d){switch(a.prop("type")){default:if(!g.trim(a.val())||a.val()==a.attr("data-validation-placeholder")||a.val()==a.attr("placeholder"))return e.allrules[b[c]].alertText;break;case "radio":case "checkbox":if(d){if(!a.attr("checked"))return e.allrules[b[c]].alertTextCheckboxMultiple;
break}d=a.closest("form");a=a.attr("name");if(0==d.find("input[name='"+a+"']:checked").size())return 1==d.find("input[name='"+a+"']:visible").size()?e.allrules[b[c]].alertTextCheckboxe:e.allrules[b[c]].alertTextCheckboxMultiple}},_groupRequired:function(a,b,c,e){var d="["+e.validateAttribute+"*="+b[c+1]+"]",h=!1;a.closest("form").find(d).each(function(){if(!f._required(g(this),b,c,e))return h=!0,!1});if(!h)return e.allrules[b[c]].alertText},_custom:function(a,b,c,e){var d=b[c+1],f=e.allrules[d];if(f)if(f.regex)if(b=
f.regex){if(!RegExp(b).test(a.val()))return e.allrules[d].alertText}else alert("jqv:custom regex not found - "+d);else if(f.func)if(f=f.func,"function"!==typeof f)alert("jqv:custom parameter 'function' is no function - "+d);else{if(!f(a,b,c,e))return e.allrules[d].alertText}else alert("jqv:custom type not allowed "+d);else alert("jqv:custom rule not found - "+d)},_funcCall:function(a,b,c,e){var d=b[c+1];if(-1<d.indexOf(".")){for(var d=d.split("."),f=window;d.length;)f=f[d.shift()];d=f}else d=window[d]||
e.customFunctions[d];if("function"==typeof d)return d(a,b,c,e)},_equals:function(a,b,c,e){b=b[c+1];if(a.val()!=g("#"+b).val())return e.allrules.equals.alertText},_maxSize:function(a,b,c,e){b=b[c+1];if(a.val().length>b)return a=e.allrules.maxSize,a.alertText+b+a.alertText2},_minSize:function(a,b,c,e){b=b[c+1];if(a.val().length<b)return a=e.allrules.minSize,a.alertText+b+a.alertText2},_min:function(a,b,c,e){b=parseFloat(b[c+1]);if(parseFloat(a.val())<b)return a=e.allrules.min,a.alertText2?a.alertText+
b+a.alertText2:a.alertText+b},_max:function(a,b,c,e){b=parseFloat(b[c+1]);if(parseFloat(a.val())>b)return a=e.allrules.max,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_past:function(a,b,c,e,d){c=c[e+1];a=g(a.find("input[name='"+c.replace(/^#+/,"")+"']"));if("now"==c.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=f._parseDate(a.val())}else a=f._parseDate(c);if(f._parseDate(b.val())>a)return b=d.allrules.past,b.alertText2?b.alertText+f._dateToString(a)+b.alertText2:
b.alertText+f._dateToString(a)},_future:function(a,b,c,e,d){c=c[e+1];a=g(a.find("input[name='"+c.replace(/^#+/,"")+"']"));if("now"==c.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=f._parseDate(a.val())}else a=f._parseDate(c);if(f._parseDate(b.val())<a)return b=d.allrules.future,b.alertText2?b.alertText+f._dateToString(a)+b.alertText2:b.alertText+f._dateToString(a)},_isDate:function(a){return RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(a)},
_isDateTime:function(a){return RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(a)},_dateCompare:function(a,
b){return new Date(a.toString())<new Date(b.toString())},_dateRange:function(a,b,c,e){if(!e.firstOfGroup[0].value&&e.secondOfGroup[0].value||e.firstOfGroup[0].value&&!e.secondOfGroup[0].value||(!f._isDate(e.firstOfGroup[0].value)||!f._isDate(e.secondOfGroup[0].value))||!f._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value))return e.allrules[b[c]].alertText+e.allrules[b[c]].alertText2},_dateTimeRange:function(a,b,c,e){if(!e.firstOfGroup[0].value&&e.secondOfGroup[0].value||e.firstOfGroup[0].value&&
!e.secondOfGroup[0].value||(!f._isDateTime(e.firstOfGroup[0].value)||!f._isDateTime(e.secondOfGroup[0].value))||!f._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value))return e.allrules[b[c]].alertText+e.allrules[b[c]].alertText2},_maxCheckbox:function(a,b,c,e,d){c=c[e+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()>c)return d.showArrow=!1,d.allrules.maxCheckbox.alertText2?d.allrules.maxCheckbox.alertText+" "+c+" "+d.allrules.maxCheckbox.alertText2:d.allrules.maxCheckbox.alertText},
_minCheckbox:function(a,b,c,e,d){c=c[e+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()<c)return d.showArrow=!1,d.allrules.minCheckbox.alertText+" "+c+" "+d.allrules.minCheckbox.alertText2},_creditCard:function(a,b,c,e){var c=!1,a=a.val().replace(/ +/g,"").replace(/-+/g,""),d=a.length;if(14<=d&&16>=d&&0<parseInt(a)){var b=0,c=d-1,d=1,f,g=new String;do f=parseInt(a.charAt(c)),g+=0==d++%2?2*f:f;while(0<=--c);for(c=0;c<g.length;c++)b+=parseInt(g.charAt(c));c=0==b%10}if(!c)return e.allrules.creditCard.alertText},
_ajax:function(a,b,c,e){var d=e.allrules[b[c+1]],c=d.extraData,h=d.extraDataDynamic,b={fieldId:a.attr("id"),fieldValue:a.val()};if("object"===typeof c)g.extend(b,c);else if("string"===typeof c)for(var j=c.split("&"),c=0;c<j.length;c++){var m=j[c].split("=");m[0]&&m[0]&&(b[m[0]]=m[1])}if(h){h=String(h).split(",");for(c=0;c<h.length;c++)j=h[c],g(j).length&&(m=a.closest("form").find(j).val(),j.replace("#",""),escape(m),b[j.replace("#","")]=m)}"field"==e.eventTrigger&&delete e.ajaxValidCache[a.attr("id")];
if(!e.isError&&!f._checkAjaxFieldStatus(a.attr("id"),e))return g.ajax({type:e.ajaxFormValidationMethod,url:d.url,cache:!1,dataType:"json",data:b,field:a,rule:d,methods:f,options:e,beforeSend:function(){},error:function(a,b){f._ajaxError(a,b)},success:function(b){var c=b[0],h=g("#"+c).eq(0);if(1==h.length){var j=b[2];b[1]?(e.ajaxValidCache[c]=!0,j?e.allrules[j]&&(b=e.allrules[j].alertTextOk)&&(j=b):j=d.alertTextOk,j?f._showPrompt(h,j,"pass",!0,e):f._closePrompt(h),"submit"==e.eventTrigger&&a.closest("form").submit()):
(e.ajaxValidCache[c]=!1,e.isError=!0,j?e.allrules[j]&&(b=e.allrules[j].alertText)&&(j=b):j=d.alertText,f._showPrompt(h,j,"",!0,e))}h.trigger("jqv.field.result",[h,e.isError,j])}}),d.alertTextLoad},_ajaxError:function(a,b){0==a.status&&null==b?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+a.status+" "+b)},_dateToString:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(a){var b=a.split("-");
b==a&&(b=a.split("/"));return new Date(b[0],b[1]-1,b[2])},_showPrompt:function(a,b,c,e,d,g){var j=f._getPrompt(a);g&&(j=!1);j?f._updatePrompt(a,j,b,c,e,d):f._buildPrompt(a,b,c,e,d)},_buildPrompt:function(a,b,c,e,d){var h=g("<div>");h.addClass(f._getClassName(a.attr("id"))+"formError");h.addClass("parentForm"+f._getClassName(a.parents("form").attr("id")));h.addClass("formError");switch(c){case "pass":h.addClass("greenPopup");break;case "load":h.addClass("blackPopup")}e&&h.addClass("ajaxed");g("<div>").addClass("formErrorContent").html(b).appendTo(h);
if(d.showArrow)switch(b=g("<div>").addClass("formErrorArrow"),c=a.data("promptPosition")||d.promptPosition,"string"==typeof c&&(e=c.indexOf(":"),-1!=e&&(c=c.substring(0,e))),c){case "bottomLeft":case "bottomRight":h.find(".formErrorContent").before(b);b.addClass("formErrorArrowBottom").html('<div class="line1"><\!-- --\></div><div class="line2"><\!-- --\></div><div class="line3"><\!-- --\></div><div class="line4"><\!-- --\></div><div class="line5"><\!-- --\></div><div class="line6"><\!-- --\></div><div class="line7"><\!-- --\></div><div class="line8"><\!-- --\></div><div class="line9"><\!-- --\></div><div class="line10"><\!-- --\></div>');
break;case "topLeft":case "topRight":b.html('<div class="line10"><\!-- --\></div><div class="line9"><\!-- --\></div><div class="line8"><\!-- --\></div><div class="line7"><\!-- --\></div><div class="line6"><\!-- --\></div><div class="line5"><\!-- --\></div><div class="line4"><\!-- --\></div><div class="line3"><\!-- --\></div><div class="line2"><\!-- --\></div><div class="line1"><\!-- --\></div>'),h.append(b)}d.addPromptClass&&h.addClass(d.addPromptClass);h.css({opacity:0,position:"absolute"});a.before(h);
e=f._calculatePosition(a,h,d);h.css({top:e.callerTopPosition,left:e.callerleftPosition,marginTop:e.marginTopSize,opacity:0}).data("callerField",a);d.autoHidePrompt&&setTimeout(function(){h.animate({opacity:0},function(){h.closest(".formErrorOuter").remove();h.remove()})},d.autoHideDelay);return h.animate({opacity:0.87})},_updatePrompt:function(a,b,c,e,d,g,j){b&&("undefined"!==typeof e&&("pass"==e?b.addClass("greenPopup"):b.removeClass("greenPopup"),"load"==e?b.addClass("blackPopup"):b.removeClass("blackPopup")),
d?b.addClass("ajaxed"):b.removeClass("ajaxed"),b.find(".formErrorContent").html(c),a=f._calculatePosition(a,b,g),a={top:a.callerTopPosition,left:a.callerleftPosition,marginTop:a.marginTopSize},j?b.css(a):b.animate(a))},_closePrompt:function(a){var b=f._getPrompt(a);b&&b.fadeTo("fast",0,function(){b.parent(".formErrorOuter").remove();b.remove()})},closePrompt:function(a){return f._closePrompt(a)},_getPrompt:function(a){var b=g(a).closest("form").attr("id"),a=f._getClassName(a.attr("id"))+"formError";
if(b=g("."+f._escapeExpression(a)+".parentForm"+b)[0])return g(b)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var b=g(document),c=g("body"),a=a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||b.hasClass("rtl")||"rtl"===(b.attr("dir")||"").toLowerCase()||c.hasClass("rtl")||"rtl"===(c.attr("dir")||"").toLowerCase();return Boolean(a)},_calculatePosition:function(a,b,c){var e,d,f,g=a.width(),m=a.position().left,p=
a.position().top;a.height();f=b.height();e=d=0;f=-f;var c=a.data("promptPosition")||c.promptPosition,k="",i="",n=i=0;"string"==typeof c&&-1!=c.indexOf(":")&&(k=c.substring(c.indexOf(":")+1),c=c.substring(0,c.indexOf(":")),-1!=k.indexOf(",")&&(i=k.substring(k.indexOf(",")+1),k=k.substring(0,k.indexOf(",")),n=parseInt(i),isNaN(n)&&(n=0)),i=parseInt(k),isNaN(k));switch(c){default:case "topRight":d+=m+g-30;e+=p;break;case "topLeft":e+=p;d+=m;break;case "centerRight":e=p+4;f=0;d=m+a.outerWidth(!0)+5;break;
case "centerLeft":d=m-(b.width()+2);e=p+4;f=0;break;case "bottomLeft":e=p+a.height()+5;f=0;d=m;break;case "bottomRight":d=m+g-30,e=p+a.height()+5,f=0}return{callerTopPosition:e+n+"px",callerleftPosition:d+i+"px",marginTopSize:f+"px"}},_saveOptions:function(a,b){if(g.validationEngineLanguage)var c=g.validationEngineLanguage.allRules;else g.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");g.validationEngine.defaults.allrules=c;c=g.extend(!0,{},g.validationEngine.defaults,
b);a.data("jqv",c);return c},_getClassName:function(a){if(a)return a.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(a){return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(a,b,c,e){for(var d,c=c+1;c<b.length;c++)if(d=jQuery("#"+b[c]).first(),d.length&&void 0==f._required(d,["required"],0,e,!0))return f._required(a,["required"],0,e)}};g.fn.validationEngine=function(a){var b=g(this);if(!b[0])return b;if("string"==typeof a&&"_"!=a.charAt(0)&&f[a])return"showPrompt"!=
a&&("hide"!=a&&"hideAll"!=a)&&f.init.apply(b),f[a].apply(b,Array.prototype.slice.call(arguments,1));if("object"==typeof a||!a)return f.init.apply(b,arguments),f.attach.apply(b);g.error("Method "+a+" does not exist in jQuery.validationEngine")};g.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:g.noop,
onBeforeAjaxFormValidation:g.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onFormSuccess:!1,onFormFailure:!1,addSuccessCssClassToField:!1,addFailureCssClassToField:!1,autoHidePrompt:!1,autoHideDelay:1E4,fadeDuration:0.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};g(function(){g.validationEngine.defaults.promptPosition=
f.isRTL()?"topLeft":"topRight"})})(jQuery);